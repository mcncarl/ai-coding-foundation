 《逐梦》华为应用市场上架准备计划

 Context（背景与目标）

 《逐梦》是一款功能完整的 Flutter Android 应用，提供 AI 驱动的待办管理、锁屏显示和壁纸工作室功能。当前版本（v1.0.0+1）已实现核心功能，但尚未配置为可上架的生产版本。

 用户目标：
 1. 将应用上架到华为应用市场
 2. 了解能否设置为付费软件

 当前问题：
 - Release 构建使用 debug 签名（未配置正式 keystore）
 - 包名使用 com.example.jinrisuopin（华为不接受示例包名）
 - 代码中可能包含硬编码的 DeepSeek API Key（安全风险）
 - 缺少隐私政策和用户协议文档
 - 缺少应用市场所需的宣传材料
 - 当前 main 分支用于内测，需要创建正式版分支

 用户决策：
 - API 架构：使用华为云 FunctionGraph 后端服务（免费额度 100万次/月）
 - 用户系统：使用华为账号 + 华为 IAP（应用内支付）
 - 分支策略：创建 release 分支用于正式版，main 分支继续内测
 - AI 功能：仅支持 DeepSeek API（移除 OpenAI 兼容性）
 - 付费模式：首次上架免费，后期引入应用内购买

 计划目标：
 1. 完成技术配置（签名、包名、后端集成）
 2. 准备上架材料（截图、描述、隐私政策）
 3. 搭建华为云后端（FunctionGraph + CloudTable）
 4. 集成华为账号和 IAP（为未来付费功能做准备）
 5. 使应用符合华为应用市场上架标准

 ---
 关于付费模式和成本的说明

 华为应用市场付费支持

 结论：华为应用市场支持付费应用，但建议首次上架采用免费模式。

 支持的付费方式：
 6. 付费下载：用户付费后才能下载（一次性购买）
 7. 应用内购买（IAP）：虚拟商品、功能解锁
 8. 订阅制：按月/年订阅高级功能

 ---
 后端成本说明（重要！）

 您选择的方案：华为云 FunctionGraph + CloudTable

 免费额度（永久）：
 - 100万次函数调用/月
 - 40万CU-秒资源使用量
 - 足以支持 3000+ 活跃用户完全免费使用

 成本估算：
 - 0-3000 用户：¥0/月（免费额度内）
 - 3000-10000 用户：¥200-500/月（超出免费额度后按量付费）
 - 10000+ 用户：考虑引入付费会员覆盖成本

 为什么选择华为云？
 ✅ 免费额度最高（是 Supabase 的 2 倍）
 ✅ 与华为应用市场生态契合，可能有推广优势
 ✅ 国内访问速度快（延迟 10-50ms）
 ✅ 长期免费，成本可控

 ---
 建议的商业化策略（分阶段）

 第一阶段（上架初期，0-3000 用户）：完全免费
 - 目标：积累用户基础和口碑
 - 策略：开放所有功能，每用户每天 10 次 AI 建议免费
 - 成本：¥0/月（华为云免费额度内）

 第二阶段（3-6 个月后，3000+ 用户）：引入增值服务
 - 免费功能：基础待办管理（无限条）、系统壁纸、每天 5 次 AI 建议
 - 付费功能：
   - 高级版（¥12 买断）：解锁所有壁纸、无限 AI 建议、自定义上传、无广告
   - AI 助手包（¥6/月）：每月 1000 次 AI 建议（重度用户）
   - 壁纸会员（¥3/月）：每周更新独家壁纸

 实现方式：
 - 使用华为应用内支付 SDK（Huawei IAP）
 - 用户购买状态存储在华为 IAP 服务器
 - 应用启动时查询购买状态，控制功能权限

 收入预期（第二阶段）：
 - 假设 5000 用户，5% 付费率 = 250 付费用户
 - 平均每用户 ¥10/月 = ¥2500/月收入
 - 减去华为云成本 ¥300/月 = 净收入 ¥2200/月
 - 华为应用市场分成 30% 后 = 实际到手 ¥1540/月

 ---
 0. 分支管理和代码准备（首要步骤）

 关键文件

 - E:\jinrisuopin\.git（Git 仓库）
 - E:\jinrisuopin\README.md（可选：更新分支说明）

 实施步骤

 0.1 创建 release 分支

 当前情况：
 - main 分支：用于内测用户（包含实验性功能，可能有 OpenAI 兼容性）
 - 需要：创建 release 分支用于正式版本（仅支持 DeepSeek，移除实验功能）

 在 E:\jinrisuopin 目录执行：

 # 1. 确保 main 分支是最新的
 git checkout main
 git status  # 确认没有未提交的更改

 # 2. 从 main 创建 release 分支
 git checkout -b release

 # 3. 推送到远程（如果有）
 git push -u origin release

 # 4. 查看当前分支
 git branch
 # 应显示：
 #   main
 # * release

 0.2 在 release 分支上进行后续所有修改

 从现在开始，所有上架准备工作（改包名、签名、后端集成等）都在 release 分支上进行。

 0.3 移除 OpenAI 兼容性（仅在 release 分支）

 如果当前代码中有 OpenAI API 相关代码，需要移除：

 1. 搜索 OpenAI 相关代码：
 # 在项目根目录执行
 grep -r "openai" lib/ --ignore-case
 grep -r "gpt-" lib/ --ignore-case

 2. 移除相关代码（具体文件需要执行时确认）：
   - API Key 配置页面中的 OpenAI 选项
   - 小梦（Xiaomeng）功能中的 OpenAI 调用逻辑
   - 相关的依赖和导入
 3. 提交更改：
 git add .
 git commit -m "chore(release): 移除 OpenAI 兼容性，专注 DeepSeek"

 0.4 分支管理规范（长期维护）

 - main 分支：继续用于内测，可以快速迭代新功能
 - release 分支：仅用于正式版本，严格测试后才合并更改
 - 合并策略：
   - main 分支的稳定功能定期合并到 release：git merge main
   - release 分支的 bug 修复可以 cherry-pick 回 main：git cherry-pick <commit-hash>

 0.5 添加设置页面（如果还没有）

 检查是否已有设置页面：
 ls E:\jinrisuopin\lib\pages\settings*
 ls E:\jinrisuopin\lib\pages\*settings*

 如果没有，需要创建 lib/pages/settings_page.dart（具体实现见后文）。

 验证方法

 # 确认在 release 分支
 git branch
 # 应显示 * release

 # 确认与 main 分支的差异
 git diff main..release

 # 应显示：移除了 OpenAI 相关代码

 ---
 技术准备部分

 1. 生成 Release Keystore 并配置签名

 关键文件

 - E:\jinrisuopin\android\app\upload-keystore.jks（新建）
 - E:\jinrisuopin\android\key.properties（新建）
 - E:\jinrisuopin\android\app\build.gradle.kts（修改）

 实施步骤

 1.1 生成 Keystore

 在项目根目录执行：
 keytool -genkey -v -keystore E:\jinrisuopin\android\app\upload-keystore.jks -storetype JKS -keyalg RSA -keysize 2048 -validity 10000 -alias zhumeng-release

 填写信息（示例）：
 - 密钥库口令：强密码（至少 12 位，混合字符）
 - 姓名：您的姓名或公司名称
 - 组织单位：开发团队
 - 组织：公司名称
 - 城市/地区：所在城市
 - 省份：省份
 - 国家代码：CN

 重要：请将密码记录到安全位置（密码管理器），并备份 keystore 文件到多个位置（U 盘、云盘），丢失后无法找回！

 1.2 创建 key.properties

 在 E:\jinrisuopin\android\ 目录创建 key.properties 文件：
 storePassword=<您设置的密钥库口令>
 keyPassword=<您设置的密钥口令>
 keyAlias=zhumeng-release
 storeFile=E:/jinrisuopin/android/app/upload-keystore.jks

 1.3 更新 .gitignore

 在 E:\jinrisuopin\android\.gitignore 中添加：
 key.properties
 app/upload-keystore.jks

 1.4 修改 build.gradle.kts

 在 E:\jinrisuopin\android\app\build.gradle.kts 中：

 1. 在文件顶部添加（在 plugins 块之前）：
 import java.util.Properties
 import java.io.FileInputStream

 val keystorePropertiesFile = rootProject.file("key.properties")
 val keystoreProperties = Properties()
 if (keystorePropertiesFile.exists()) {
     keystoreProperties.load(FileInputStream(keystorePropertiesFile))
 }

 2. 在 android {} 块中添加 signingConfigs（在 defaultConfig 之前）：
 signingConfigs {
     create("release") {
         keyAlias = keystoreProperties["keyAlias"] as String?
         keyPassword = keystoreProperties["keyPassword"] as String?
         storeFile = file(keystoreProperties["storeFile"] as String)
         storePassword = keystoreProperties["storePassword"] as String?
     }
 }

 3. 修改 buildTypes 中的 release 块：
 buildTypes {
     release {
         signingConfig = signingConfigs.getByName("release")
         isMinifyEnabled = true
         isShrinkResources = true
         proguardFiles(
             getDefaultProguardFile("proguard-android-optimize.txt"),
             "proguard-rules.pro"
         )
     }
 }

 验证方法

 # 清理并构建
 flutter clean
 flutter build apk --release

 # 验证签名
 cd E:\jinrisuopin\build\app\outputs\flutter-apk
 keytool -printcert -jarfile app-release.apk

 # 应显示 keystore 中的信息（CN=您的姓名...）

 ---
 4. 修改包名为正式域名

 关键文件

 - E:\jinrisuopin\android\app\build.gradle.kts
 - E:\jinrisuopin\android\app\src\main\AndroidManifest.xml
 - E:\jinrisuopin\android\app\src\main\kotlin\com\example\jinrisuopin\*（整个目录）

 实施步骤

 2.1 修改 Android 应用 ID

 编辑 E:\jinrisuopin\android\app\build.gradle.kts，在 defaultConfig 块中：
 defaultConfig {
     applicationId = "com.zhumeng.jinrisuopin"  // 从 com.example.jinrisuopin 改为此
     // ... 其他配置保持不变
 }

 同时修改 flavorDimensions 中的两个版本：
 productFlavors {
     create("public") {
         dimension = "mode"
         applicationId = "com.zhumeng.jinrisuopin"  // 修改
         manifestPlaceholders["appLabel"] = "逐梦"
     }
     create("personal") {
         dimension = "mode"
         applicationId = "com.zhumeng.jinrisuopin.personal"  // 修改
         manifestPlaceholders["appLabel"] = "逐梦·个人版"
     }
 }

 2.2 修改 AndroidManifest.xml

 编辑 E:\jinrisuopin\android\app\src\main\AndroidManifest.xml：
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.zhumeng.jinrisuopin">  <!-- 修改此行 -->

 2.3 重命名 Kotlin 文件目录和修改包名

 1. 重命名目录结构：
 E:\jinrisuopin\android\app\src\main\kotlin\com\example\jinrisuopin\
 → E:\jinrisuopin\android\app\src\main\kotlin\com\zhumeng\jinrisuopin\

 2. 修改该目录下所有 .kt 文件的第一行包声明：
   - MainActivity.kt
   - AlarmScheduler.kt
   - AlarmReceiver.kt
   - AlarmStopReceiver.kt
   - AlarmRingtoneService.kt
   - AlarmActivity.kt
   - BootReceiver.kt
   - WallpaperChangedReceiver.kt

 将：
 package com.example.jinrisuopin
 改为：
 package com.zhumeng.jinrisuopin

 验证方法

 flutter clean
 flutter pub get
 flutter build apk --release

 # 检查生成的 APK 包名
 adb install -r build/app/outputs/flutter-apk/app-public-release.apk
 adb shell pm list packages | grep zhumeng

 # 应显示：package:com.zhumeng.jinrisuopin

 ---
 3. 搭建华为云后端服务

 目标：搭建华为云 FunctionGraph + CloudTable 后端，用户无需配置 API Key，应用直接调用您的后端服务。

 关键文件

 - 华为云控制台（在线配置）
 - E:\jinrisuopin\lib\services\backend_service.dart（新建）
 - E:\jinrisuopin\lib\features\xiaomeng\*（修改 API 调用逻辑）
 - E:\jinrisuopin\pubspec.yaml（添加依赖）

 ---
 3.1 注册华为云并开通服务

 步骤 1：注册华为云账号

 1. 访问：https://www.huaweicloud.com/
 2. 点击"注册" → 填写手机号/邮箱 → 完成实名认证
 3. 实名认证需要：身份证照片 + 人脸识别（约 5-10 分钟）

 步骤 2：开通 FunctionGraph 服务

 4. 登录华为云控制台：https://console.huaweicloud.com/
 5. 搜索"FunctionGraph" → 点击"函数工作流"
 6. 点击"开通服务"（免费，无需支付）
 7. 选择区域：华北-北京四 或 华东-上海一（离您用户最近的区域）

 步骤 3：开通 CloudTable 服务（可选）

 如果需要存储用户数据（如 AI 对话历史、用户配额）：
 8. 搜索"CloudTable" → 点击"表格存储服务"
 9. 点击"开通服务"
 10. 注意：CloudTable 按量计费，建议先用 FunctionGraph 的环境变量存储简单数据

 ---
 3.2 创建华为云函数（AI 代理）

 步骤 1：创建函数

 11. 进入 FunctionGraph 控制台
 12. 点击"创建函数" → 选择"从头开始创建"
 13. 填写配置：
   - 函数名称：zhumeng-ai-proxy
   - 运行时环境：Node.js 18.x（推荐）或 Python 3.9
   - 函数类型：HTTP函数
   - 委托：选择"不使用委托"

 步骤 2：编写函数代码

 选择 Node.js 18.x，在在线编辑器中输入以下代码：

 // index.js
 const https = require('https');

 exports.handler = async (event, context) => {
     // 1. 解析请求参数
     let body;
     try {
         body = JSON.parse(event.body || '{}');
     } catch (e) {
         return {
             statusCode: 400,
             body: JSON.stringify({ error: '无效的 JSON' })
         };
     }

     const { prompt, userId } = body;

     if (!prompt) {
         return {
             statusCode: 400,
             body: JSON.stringify({ error: '缺少 prompt 参数' })
         };
     }

     // 2. 从环境变量获取 DeepSeek API Key
     const DEEPSEEK_API_KEY = process.env.DEEPSEEK_API_KEY;

     if (!DEEPSEEK_API_KEY) {
         return {
             statusCode: 500,
             body: JSON.stringify({ error: '服务器配置错误' })
         };
     }

     // 3. 调用 DeepSeek API
     const requestData = JSON.stringify({
         model: 'deepseek-chat',
         messages: [
             {
                 role: 'system',
                 content: '你是《逐梦》应用的 AI 助手"小梦"，帮助用户管理待办事项。'
             },
             {
                 role: 'user',
                 content: prompt
             }
         ],
         temperature: 0.7
     });

     const options = {
         hostname: 'api.deepseek.com',
         port: 443,
         path: '/v1/chat/completions',
         method: 'POST',
         headers: {
             'Content-Type': 'application/json',
             'Authorization': `Bearer ${DEEPSEEK_API_KEY}`,
             'Content-Length': Buffer.byteLength(requestData)
         }
     };

     return new Promise((resolve, reject) => {
         const req = https.request(options, (res) => {
             let data = '';

             res.on('data', (chunk) => {
                 data += chunk;
             });

             res.on('end', () => {
                 if (res.statusCode === 200) {
                     try {
                         const result = JSON.parse(data);
                         const aiResponse = result.choices[0].message.content;

                         resolve({
                             statusCode: 200,
                             body: JSON.stringify({
                                 success: true,
                                 response: aiResponse
                             })
                         });
                     } catch (e) {
                         resolve({
                             statusCode: 500,
                             body: JSON.stringify({ error: '解析响应失败' })
                         });
                     }
                 } else {
                     resolve({
                         statusCode: res.statusCode,
                         body: JSON.stringify({ error: `DeepSeek API 错误: ${res.statusCode}` })
                     });
                 }
             });
         });

         req.on('error', (e) => {
             resolve({
                 statusCode: 500,
                 body: JSON.stringify({ error: `请求失败: ${e.message}` })
             });
         });

         req.write(requestData);
         req.end();
     });
 };

 步骤 3：配置环境变量

 1. 在函数编辑页面，点击"配置" → "环境变量"
 2. 添加环境变量：
   - 键：DEEPSEEK_API_KEY
   - 值：您的 DeepSeek API Key（从 https://platform.deepseek.com/ 获取）
 3. 点击"保存"

 步骤 4：部署函数

 4. 点击"部署"按钮
 5. 等待部署完成（约 10-30 秒）

 步骤 5：测试函数

 6. 点击"测试"按钮
 7. 配置测试事件：
 {
   "body": "{\"prompt\":\"今天下午3点开会\"}"
 }
 8. 点击"测试"，应返回 AI 响应

 步骤 6：获取函数 URL

 9. 点击"触发器" Tab
 10. 复制"API网关触发器"的 URL，格式类似：
 https://xxxxxxxxxxxx.apig.cn-north-4.huaweicloudapis.com/zhumeng-ai-proxy
 11. 重要：将此 URL 记录下来，后面 Flutter 应用会调用它

 ---
 3.3 在 Flutter 中集成后端服务

 步骤 1：添加依赖

 在 pubspec.yaml 中添加（如果还没有）：
 dependencies:
   dio: ^5.4.0

 步骤 2：创建后端服务类

 创建 E:\jinrisuopin\lib\services\backend_service.dart：

 import 'package:dio/dio.dart';

 class BackendService {
   static const String _functionUrl =
       'https://xxxxxxxxxxxx.apig.cn-north-4.huaweicloudapis.com/zhumeng-ai-proxy';
   // ⚠️ 替换为您的实际函数 URL

   final Dio _dio = Dio(BaseOptions(
     connectTimeout: const Duration(seconds: 30),
     receiveTimeout: const Duration(seconds: 30),
   ));

   /// 调用 AI 生成待办建议
   Future<String> getAISuggestion(String prompt, {String? userId}) async {
     try {
       final response = await _dio.post(
         _functionUrl,
         data: {
           'prompt': prompt,
           'userId': userId,
         },
       );

       if (response.statusCode == 200) {
         final data = response.data;
         if (data['success'] == true) {
           return data['response'] as String;
         } else {
           throw Exception(data['error'] ?? '未知错误');
         }
       } else {
         throw Exception('服务器错误：${response.statusCode}');
       }
     } on DioException catch (e) {
       if (e.type == DioExceptionType.connectionTimeout ||
           e.type == DioExceptionType.receiveTimeout) {
         throw Exception('网络超时，请检查网络连接');
       } else if (e.type == DioExceptionType.badResponse) {
         throw Exception('服务器错误：${e.response?.statusCode}');
       } else {
         throw Exception('网络错误：${e.message}');
       }
     } catch (e) {
       throw Exception('调用失败：$e');
     }
   }
 }

 步骤 3：修改小梦（Xiaomeng）功能的 API 调用逻辑

 找到现有的 DeepSeek API 调用代码（可能在 lib/features/xiaomeng/ 下），替换为：

 // 示例：在小梦页面中
 import 'package:jinrisuopin/services/backend_service.dart';

 class XiaomengPage extends StatefulWidget {
   // ...
 }

 class _XiaomengPageState extends State<XiaomengPage> {
   final _backendService = BackendService();

   Future<void> _getAISuggestion(String userInput) async {
     try {
       setState(() {
         _isLoading = true;
         _error = null;
       });

       // 调用后端服务
       final aiResponse = await _backendService.getAISuggestion(userInput);

       setState(() {
         _aiResponse = aiResponse;
         _isLoading = false;
       });
     } catch (e) {
       setState(() {
         _error = e.toString();
         _isLoading = false;
       });

       // 显示错误提示
       ScaffoldMessenger.of(context).showSnackBar(
         SnackBar(content: Text(_error!)),
       );
     }
   }

   // ...
 }

 步骤 4：移除原有的 API Key 配置逻辑

 - 删除 lib/services/api_config_service.dart（如果之前创建了）
 - 删除 lib/pages/api_config_page.dart（如果之前创建了）
 - 移除相关的导入和引用

 ---
 3.4 添加用户配额控制（可选，未来扩展）

 如果您想限制免费用户的 AI 调用次数（如每天 5 次），可以在华为云函数中添加：

 方案 A：使用 CloudTable 存储用户配额（推荐，但需要开通 CloudTable）

 方案 B：使用本地 SharedPreferences 存储（简单，但不防刷）

 在 Flutter 应用中：
 // lib/services/quota_service.dart
 import 'package:shared_preferences/shared_preferences.dart';

 class QuotaService {
   static const int FREE_DAILY_QUOTA = 5; // 免费用户每天 5 次

   /// 检查今日配额是否用完
   Future<bool> hasQuota() async {
     final prefs = await SharedPreferences.getInstance();
     final today = DateTime.now().toIso8601String().substring(0, 10);
     final lastDate = prefs.getString('last_quota_date');
     final usedCount = prefs.getInt('used_quota') ?? 0;

     if (lastDate != today) {
       // 新的一天，重置配额
       await prefs.setString('last_quota_date', today);
       await prefs.setInt('used_quota', 0);
       return true;
     }

     return usedCount < FREE_DAILY_QUOTA;
   }

   /// 消耗一次配额
   Future<void> consumeQuota() async {
     final prefs = await SharedPreferences.getInstance();
     final usedCount = prefs.getInt('used_quota') ?? 0;
     await prefs.setInt('used_quota', usedCount + 1);
   }

   /// 获取剩余配额
   Future<int> getRemainingQuota() async {
     final prefs = await SharedPreferences.getInstance();
     final today = DateTime.now().toIso8601String().substring(0, 10);
     final lastDate = prefs.getString('last_quota_date');
     final usedCount = prefs.getInt('used_quota') ?? 0;

     if (lastDate != today) {
       return FREE_DAILY_QUOTA;
     }

     return FREE_DAILY_QUOTA - usedCount;
   }
 }

 在调用 AI 之前检查配额：
 final quotaService = QuotaService();

 if (!await quotaService.hasQuota()) {
   // 配额用完，提示升级
   showDialog(
     context: context,
     builder: (context) => AlertDialog(
       title: const Text('今日免费额度已用完'),
       content: const Text('升级到高级版即可无限使用 AI 建议功能'),
       actions: [
         TextButton(
           onPressed: () => Navigator.pop(context),
           child: const Text('稍后'),
         ),
         ElevatedButton(
           onPressed: () {
             // 跳转到购买页面（后续实现）
             Navigator.pop(context);
           },
           child: const Text('立即升级'),
         ),
       ],
     ),
   );
   return;
 }

 // 调用 AI
 final aiResponse = await _backendService.getAISuggestion(userInput);

 // 消耗配额
 await quotaService.consumeQuota();

 ---
 验证方法

 1. 测试华为云函数：
   - 在华为云控制台测试函数，确认返回正确的 AI 响应
 2. 测试 Flutter 应用：
 flutter run --release
   - 打开小梦功能
   - 输入测试内容："明天下午3点开会"
   - 应返回 AI 建议（无需配置 API Key）
 3. 测试网络错误处理：
   - 关闭设备网络
   - 尝试调用 AI 功能
   - 应显示友好的错误提示
 4. 测试配额限制（如果实现了）：
   - 连续调用 AI 功能 5 次
   - 第 6 次应提示配额用完
 5. 反编译检查：
   - 使用 jadx-gui 反编译 APK
   - 确认代码中不包含 DeepSeek API Key
   - 仅包含华为云函数 URL（公开可见，无安全风险）

 ---
 成本监控

 1. 登录华为云控制台
 2. 进入"费用中心" → "用量明细"
 3. 查看 FunctionGraph 调用次数：
   - 前 100万次/月：免费
   - 超出后按量计费：¥0.0002/次
 4. 设置费用提醒：
   - 进入"费用中心" → "预算管理"
   - 设置预算阈值（如¥50/月）
   - 超出后会短信/邮件提醒

 ---
 4. 集成华为账号服务（HMS Account Kit）

 目标：为未来的付费功能做准备，允许用户登录华为账号。

 关键文件

 - E:\jinrisuopin\android\app\build.gradle.kts（添加依赖）
 - E:\jinrisuopin\android\app\src\main\AndroidManifest.xml（添加权限）
 - E:\jinrisuopin\lib\services\account_service.dart（新建）
 - E:\jinrisuopin\pubspec.yaml（添加依赖）

 ---
 重要提示：此步骤可以延后到真正需要付费功能时再实现。首次上架可以跳过此步骤。

 ---
 实施步骤（未来扩展，可选）

 4.1 在 AppGallery Connect 中配置

 1. 登录 AppGallery Connect：https://developer.huawei.com/consumer/cn/service/josp/agc/index.html
 2. 选择您的应用
 3. 点击"构建" → "账号服务"
 4. 点击"启用"
 5. 下载 agconnect-services.json 文件

 4.2 添加配置文件

 将 agconnect-services.json 放到：
 E:\jinrisuopin\android\app\agconnect-services.json

 4.3 添加依赖

 在 android/app/build.gradle.kts 的 dependencies 块中添加：
 implementation("com.huawei.hms:hwid:6.12.0.300")

 在项目级 android/build.gradle.kts 中添加：
 buildscript {
     dependencies {
         classpath("com.huawei.agconnect:agcp:1.9.1.301")
     }
 }

 在 android/app/build.gradle.kts 顶部添加：
 plugins {
     // ... 现有plugins
     id("com.huawei.agconnect")
 }

 4.4 创建账号服务

 创建 lib/services/account_service.dart：
 // 此为示例代码，实际实现时需要使用华为HMS插件
 class AccountService {
   bool _isSignedIn = false;
   String? _userId;

   Future<bool> signIn() async {
     // TODO: 集成华为账号登录
     // 使用 huawei_account package 或 method channel
     return false;
   }

   Future<void> signOut() async {
     _isSignedIn = false;
     _userId = null;
   }

   bool get isSignedIn => _isSignedIn;
   String? get userId => _userId;
 }

 ---
 6. 集成华为应用内支付（HMS IAP）

 目标：为未来的付费功能（买断制/订阅制）做准备。

 关键文件

 - E:\jinrisuopin\android\app\build.gradle.kts（添加依赖）
 - E:\jinrisuopin\lib\services\iap_service.dart（新建）

 ---
 重要提示：此步骤也可以延后到真正需要付费功能时再实现。首次上架可以跳过。

 ---
 实施步骤（未来扩展，可选）

 5.1 在 AppGallery Connect 中配置商品

 1. 登录 AppGallery Connect
 2. 选择您的应用
 3. 点击"运营" → "产品" → "应用内支付"
 4. 点击"添加商品"
 5. 配置商品：
   - 高级版（买断）：
       - 商品ID：pro_version
     - 类型：一次性消费型商品
     - 价格：¥12
   - AI 助手包（订阅）：
       - 商品ID：ai_monthly
     - 类型：订阅
     - 价格：¥6/月

 5.2 添加依赖

 在 android/app/build.gradle.kts 中添加：
 implementation("com.huawei.hms:iap:6.12.0.300")

 5.3 创建 IAP 服务

 创建 lib/services/iap_service.dart：
 // 此为示例代码，实际实现时需要使用华为HMS插件
 class IAPService {
   /// 检查用户是否已购买高级版
   Future<bool> hasPurchased(String productId) async {
     // TODO: 查询购买状态
     return false;
   }

   /// 发起购买
   Future<bool> purchase(String productId) async {
     // TODO: 调用华为IAP购买流程
     return false;
   }

   /// 恢复购买
   Future<void> restorePurchases() async {
     // TODO: 恢复之前的购买记录
   }
 }

 ---
 6. 创建设置页面

 目标：添加设置页面，包含隐私政策、用户协议、关于应用等入口。

 关键文件

 - E:\jinrisuopin\lib\pages\settings_page.dart（新建）
 - E:\jinrisuopin\lib\app.dart（修改，添加设置入口）

 实施步骤

 6.1 创建设置页面

 创建 E:\jinrisuopin\lib\pages\settings_page.dart：

 import 'package:flutter/material.dart';
 import 'privacy_policy_page.dart';
 import 'package:package_info_plus/package_info_plus.dart';

 class SettingsPage extends StatefulWidget {
   const SettingsPage({Key? key}) : super(key: key);

   @override
   State<SettingsPage> createState() => _SettingsPageState();
 }

 class _SettingsPageState extends State<SettingsPage> {
   String _version = '';

   @override
   void initState() {
     super.initState();
     _loadVersion();
   }

   Future<void> _loadVersion() async {
     final packageInfo = await PackageInfo.fromPlatform();
     setState(() {
       _version = '${packageInfo.version} (${packageInfo.buildNumber})';
     });
   }

   @override
   Widget build(BuildContext context) {
     return Scaffold(
       appBar: AppBar(
         title: const Text('设置'),
       ),
       body: ListView(
         children: [
           // 通用设置区域
           _buildSectionHeader('通用'),
           ListTile(
             leading: const Icon(Icons.notifications_outlined),
             title: const Text('通知设置'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               // TODO: 跳转到通知设置页面
             },
           ),
           ListTile(
             leading: const Icon(Icons.wallpaper_outlined),
             title: const Text('锁屏设置'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               // TODO: 跳转到锁屏设置页面
             },
           ),

           const Divider(),

           // 账号与会员区域（未来扩展）
           _buildSectionHeader('账号与会员'),
           ListTile(
             leading: const Icon(Icons.person_outline),
             title: const Text('登录华为账号'),
             subtitle: const Text('登录后可享受更多功能'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               // TODO: 实现华为账号登录
               ScaffoldMessenger.of(context).showSnackBar(
                 const SnackBar(content: Text('功能开发中，敬请期待')),
               );
             },
           ),
           ListTile(
             leading: const Icon(Icons.star_outline),
             title: const Text('升级到高级版'),
             subtitle: const Text('解锁所有功能'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               // TODO: 跳转到购买页面
               ScaffoldMessenger.of(context).showSnackBar(
                 const SnackBar(content: Text('功能开发中，敬请期待')),
               );
             },
           ),

           const Divider(),

           // 帮助与反馈区域
           _buildSectionHeader('帮助与反馈'),
           ListTile(
             leading: const Icon(Icons.help_outline),
             title: const Text('使用帮助'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               // TODO: 打开帮助文档
             },
           ),
           ListTile(
             leading: const Icon(Icons.feedback_outlined),
             title: const Text('意见反馈'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               // TODO: 打开反馈页面
             },
           ),

           const Divider(),

           // 关于区域
           _buildSectionHeader('关于'),
           ListTile(
             leading: const Icon(Icons.description_outlined),
             title: const Text('隐私政策'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               Navigator.push(
                 context,
                 MaterialPageRoute(
                   builder: (_) => const PrivacyPolicyPage(),
                 ),
               );
             },
           ),
           ListTile(
             leading: const Icon(Icons.article_outlined),
             title: const Text('用户协议'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               Navigator.push(
                 context,
                 MaterialPageRoute(
                   builder: (_) => const PrivacyPolicyPage(isUserAgreement: true),
                 ),
               );
             },
           ),
           ListTile(
             leading: const Icon(Icons.info_outline),
             title: const Text('关于《逐梦》'),
             subtitle: Text('版本 $_version'),
             trailing: const Icon(Icons.chevron_right),
             onTap: () {
               _showAboutDialog();
             },
           ),
         ],
       ),
     );
   }

   Widget _buildSectionHeader(String title) {
     return Padding(
       padding: const EdgeInsets.fromLTRB(16, 16, 16, 8),
       child: Text(
         title,
         style: TextStyle(
           fontSize: 14,
           fontWeight: FontWeight.bold,
           color: Colors.grey[600],
         ),
       ),
     );
   }

   void _showAboutDialog() {
     showAboutDialog(
       context: context,
       applicationName: '《逐梦》',
       applicationVersion: _version,
       applicationIcon: Image.asset(
         'assets/icons/ic_launcher.png', // 如果有的话
         width: 64,
         height: 64,
       ),
       children: [
         const SizedBox(height: 16),
         const Text(
           '《逐梦》是一款 AI 驱动的智能待办管理应用，帮助您高效管理时间、实现目标。',
         ),
         const SizedBox(height: 16),
         const Text('© 2026 个人开发者'),
       ],
     );
   }
 }

 6.2 在 pubspec.yaml 中添加依赖

 dependencies:
   package_info_plus: ^8.0.0

 6.3 在应用主界面添加设置入口

 编辑 lib/app.dart（或您的主导航页面），添加设置按钮：

 // 示例：在 AppBar 中添加设置图标
 AppBar(
   title: const Text('逐梦'),
   actions: [
     IconButton(
       icon: const Icon(Icons.settings_outlined),
       onPressed: () {
         Navigator.push(
           context,
           MaterialPageRoute(builder: (_) => const SettingsPage()),
         );
       },
     ),
   ],
 )

 或者在底部导航栏中添加设置 Tab（如果您使用 TabBar）。

 验证方法

 1. 运行应用
 2. 点击设置图标/Tab
 3. 进入设置页面，检查所有选项是否显示
 4. 点击"隐私政策"和"用户协议"，确认能正常显示
 5. 点击"关于《逐梦》"，确认版本号正确显示

 ---
 6. 准备隐私政策和用户协议

 关键文件

 - E:\jinrisuopin\assets\privacy_policy.md（新建）
 - E:\jinrisuopin\assets\user_agreement.md（新建）
 - E:\jinrisuopin\lib\pages\privacy_policy_page.dart（新建）
 - E:\jinrisuopin\pubspec.yaml（添加资源和依赖）

 实施步骤

 4.1 创建隐私政策文档

 创建 E:\jinrisuopin\assets\privacy_policy.md，内容模板：

 # 《逐梦》隐私政策

 **更新日期：2026年2月12日**
 **生效日期：2026年2月12日**

 ## 一、引言

 《逐梦》（以下简称"本应用"）尊重并保护用户的隐私权。本隐私政策说明了我们如何收集、使用、存储和保护您的个人信息。

 ## 二、我们收集的信息

 ### 2.1 您主动提供的信息
 - **待办事项内容**：您创建的待办事项文本和时间信息
 - **壁纸图片**：您选择或上传的壁纸文件
 - **DeepSeek API Key**：您配置的第三方 AI 服务密钥（加密存储在本地）

 ### 2.2 自动收集的信息
 - **设备信息**：设备型号、操作系统版本、应用版本号
 - **使用数据**：功能使用频次、错误日志（不包含个人信息）

 ### 2.3 我们不会收集的信息
 - 您的姓名、电话号码、电子邮箱等身份信息
 - 您的地理位置信息
 - 您的通讯录、短信、通话记录

 ## 三、信息的使用

 我们使用收集的信息用于：
 1. 提供待办管理、锁屏显示、壁纸设置等核心功能
 2. 通过 DeepSeek API 为您提供智能待办建议（需使用您配置的 API Key）
 3. 改善应用性能和用户体验
 4. 发送重要通知（如待办提醒）

 ## 四、信息的存储和安全

 - **本地存储**：所有待办数据、壁纸、配置信息均存储在您的设备本地
 - **不上传云端**：我们不会将您的个人数据上传至任何服务器
 - **第三方服务**：使用 DeepSeek AI 服务时，仅发送必要的待办文本用于生成建议

 ## 五、权限说明

 本应用需要以下权限：

 | 权限名称 | 用途说明 | 是否必需 |
 |---------|---------|---------|
 | 网络访问 | 调用 DeepSeek AI 服务 | 必需 |
 | 设置壁纸 | 设置锁屏和桌面壁纸 | 必需 |
 | 通知权限 | 发送待办提醒通知 | 必需 |
 | 精确闹钟 | 准时触发待办提醒 | 必需 |
 | 存储权限 | 读取和保存壁纸图片 | 可选 |

 ## 六、第三方服务

 ### DeepSeek AI
 - **用途**：提供智能待办建议
 - **数据传输**：仅发送待办文本内容
 - **隐私政策**：https://www.deepseek.com/privacy
 - **用户控制**：您可以选择不配置 API Key，应用仍可正常使用其他功能

 ## 七、儿童隐私保护

 本应用不专门面向 14 周岁以下儿童。

 ## 八、隐私政策的变更

 我们可能会不时更新本隐私政策。重大变更将通过应用内通知告知您。

 ## 九、联系我们

 如对本隐私政策有任何疑问，请通过应用内反馈功能联系我们。

 4.2 创建用户协议

 创建 E:\jinrisuopin\assets\user_agreement.md（内容类似，包含服务说明、用户责任、免责声明等）

 4.3 创建隐私政策展示页面

 创建 E:\jinrisuopin\lib\pages\privacy_policy_page.dart：

 import 'package:flutter/material.dart';
 import 'package:flutter/services.dart';
 import 'package:flutter_markdown/flutter_markdown.dart';
 import 'package:url_launcher/url_launcher.dart';

 class PrivacyPolicyPage extends StatelessWidget {
   final bool isUserAgreement;

   const PrivacyPolicyPage({Key? key, this.isUserAgreement = false}) : super(key: key);

   @override
   Widget build(BuildContext context) {
     final assetPath = isUserAgreement
         ? 'assets/user_agreement.md'
         : 'assets/privacy_policy.md';
     final title = isUserAgreement ? '用户协议' : '隐私政策';

     return Scaffold(
       appBar: AppBar(title: Text(title)),
       body: FutureBuilder<String>(
         future: rootBundle.loadString(assetPath),
         builder: (context, snapshot) {
           if (snapshot.hasData) {
             return Markdown(
               data: snapshot.data!,
               onTapLink: (text, href, title) {
                 if (href != null) {
                   launchUrl(Uri.parse(href));
                 }
               },
             );
           } else if (snapshot.hasError) {
             return const Center(child: Text('加载失败'));
           }
           return const Center(child: CircularProgressIndicator());
         },
       ),
     );
   }
 }

 4.4 更新 pubspec.yaml

 添加资源和依赖：
 flutter:
   assets:
     - assets/privacy_policy.md
     - assets/user_agreement.md

 dependencies:
   flutter_markdown: ^0.7.3
   url_launcher: ^6.3.1

 4.5 在设置页面添加入口

 在应用的设置页面（或关于页面）添加：
 ListTile(
   title: const Text('隐私政策'),
   trailing: const Icon(Icons.chevron_right),
   onTap: () {
     Navigator.push(
       context,
       MaterialPageRoute(builder: (_) => const PrivacyPolicyPage()),
     );
   },
 ),
 ListTile(
   title: const Text('用户协议'),
   trailing: const Icon(Icons.chevron_right),
   onTap: () {
     Navigator.push(
       context,
       MaterialPageRoute(
         builder: (_) => const PrivacyPolicyPage(isUserAgreement: true),
       ),
     );
   },
 ),

 验证方法

 - 在应用设置中点击"隐私政策"和"用户协议"，能正确显示内容
 - 点击链接能跳转到外部浏览器

 ---
 8. 托管隐私政策网页

 华为应用市场要求提供隐私政策的网页链接。

 方案 A：使用 GitHub Pages（推荐，免费）

 9. 创建 GitHub 仓库（如 zhumeng-privacy）
 10. 将 privacy_policy.md 转换为 HTML（可使用在线工具或 Pandoc）
 11. 将 HTML 文件推送到仓库
 12. 在仓库设置中启用 GitHub Pages
 13. 获得 URL：https://<username>.github.io/zhumeng-privacy/privacy.html

 方案 B：使用华为云 OBS（推荐，与华为生态契合）

 14. 开通华为云对象存储服务（OBS）
 15. 创建公共读权限的 Bucket
 16. 上传 HTML 文件
 17. 获得公网访问 URL

 方案 C：使用免费的隐私政策托管服务

 - TermsFeed：https://www.termsfeed.com/
 - FreePrivacyPolicy：https://www.freeprivacypolicy.com/

 最终需要获得一个可访问的 URL，如：
 https://<username>.github.io/zhumeng-privacy/privacy.html

 ---
 9. 优化 ProGuard 混淆规则

 关键文件

 - E:\jinrisuopin\android\app\proguard-rules.pro（已存在，需检查）

 实施步骤

 检查并确保 proguard-rules.pro 包含以下规则：

 # Flutter 核心
 -keep class io.flutter.app.** { *; }
 -keep class io.flutter.plugin.** { *; }
 -keep class io.flutter.util.** { *; }
 -keep class io.flutter.view.** { *; }
 -keep class io.flutter.** { *; }
 -keep class io.flutter.plugins.** { *; }

 # Flutter 引擎
 -keep class androidx.lifecycle.** { *; }

 # Hive (本地数据库)
 -keep class hive.** { *; }
 -keep class * extends hive.GeneratedAdapter

 # WorkManager
 -keep class androidx.work.** { *; }
 -dontwarn androidx.work.**

 # 通知
 -keep class com.dexterous.** { *; }

 # 保留行号（便于调试崩溃）
 -keepattributes SourceFile,LineNumberTable
 -renamesourcefileattribute SourceFile

 # OkHttp & Dio
 -dontwarn okhttp3.**
 -dontwarn okio.**
 -keep class okhttp3.** { *; }
 -keep interface okhttp3.** { *; }

 # Gson (如果使用)
 -keepattributes Signature
 -keepattributes *Annotation*
 -keep class com.google.gson.** { *; }

 验证方法

 flutter build apk --release
 # 使用 jadx-gui 反编译 APK，检查代码是否被混淆

 ---
 10. 生成最终的 Release APK/AAB

 实施步骤

 # 1. 清理之前的构建
 flutter clean

 # 2. 获取依赖
 flutter pub get

 # 3. 构建 Release APK（兼容性好）
 flutter build apk --release --flavor public

 # 4. 构建 Release AAB（推荐，华为应用市场支持，体积更小）
 flutter build appbundle --release --flavor public

 生成的文件位置

 - APK: E:\jinrisuopin\build\app\outputs\flutter-apk\app-public-release.apk
 - AAB: E:\jinrisuopin\build\app\outputs\bundle\publicRelease\app-public-release.aab

 验证签名

 # 验证 APK 签名
 keytool -printcert -jarfile E:\jinrisuopin\build\app\outputs\flutter-apk\app-public-release.apk

 # 应显示您 keystore 中的信息（CN=您的姓名...）

 完整测试

 在真实设备上安装并测试：
 adb install -r E:\jinrisuopin\build\app\outputs\flutter-apk\app-public-release.apk

 测试检查清单：
 - 所有权限正常申请
 - 待办创建/编辑/删除功能正常
 - 锁屏显示正常工作
 - 壁纸设置功能正常
 - DeepSeek AI 功能正常（配置 Key 后）
 - 通知提醒正常触发
 - 隐私政策页面正常显示
 - 应用无崩溃，运行流畅

 ---
 材料准备部分

 1. 应用截图（5-8 张）

 规格要求

 - 尺寸：1080x2340 px（或设备原生分辨率）
 - 格式：PNG 或 JPG
 - 数量：至少 5 张，最多 8 张

 建议内容

 1. 首页待办列表
 2. 添加/编辑待办界面
 3. 小梦 AI 建议功能
 4. 锁屏显示效果
 5. 壁纸工作室
 6. 通知提醒
 7. 设置页面（含隐私政策入口）
 8. 日历视图

 制作方法

 - 在真实设备或模拟器上截图
 - 使用在线工具美化（Mockuphone、Screenly）
 - 确保截图清晰、内容无敏感信息

 ---
 2. 应用图标

 规格要求

 - 应用图标：512x512 px（PNG，不透明）
 - 特性图（可选）：1024x500 px

 制作方法

 从现有图标放大：
 E:\jinrisuopin\android\app\src\main\res\mipmap-xxxhdpi\ic_launcher.png
 使用图片编辑工具（Photoshop、GIMP、在线工具）放大到 512x512

 ---
 3. 应用描述

 简介（50 字以内）

 《逐梦》- AI 驱动的智能待办管理应用，支持锁屏显示、精美壁纸和 DeepSeek AI 建议，让您的每一天更高效、更美好。

 详细描述（500-1000 字）

 包含功能介绍、特色亮点、权限说明等（参考设计方案中的完整版本）

 关键词（5-10 个）

 待办清单, 任务管理, AI助手, 锁屏显示, 壁纸, 效率工具, 时间管理, 智能提醒, 目标管理

 ---
 4. 软件著作权（可选）

 结论：首次上架华为应用市场不强制要求软著。

 如需申请：
 - 途径：中国版权保护中心（http://www.ccopyright.com.cn/）或代理机构
 - 费用：代理办理约 ¥800-2000，自行办理免费
 - 周期：代理 1-3 个月，自行 3-6 个月
 - 所需材料：申请表、源代码（前后各 30 页）、说明书、身份证明

 ---
 华为应用市场上架流程

 1. 注册华为开发者账号

 2. 访问：https://developer.huawei.com/consumer/cn/
 3. 注册账号（个人或企业）
 4. 完成实名认证

 个人开发者：身份证照片，免费
 企业开发者：营业执照，¥99/年（部分地区免费）

 ---
 5. 创建应用并上传

 6. 登录 AppGallery Connect：https://developer.huawei.com/consumer/cn/service/josp/agc/index.html
 7. 点击"我的应用" > "添加应用"
 8. 填写基本信息：
   - 应用名称：逐梦
   - 应用包名：com.zhumeng.jinrisuopin
   - 应用分类：工具 > 效率工具
   - 国家/地区：中国
 4. 上传软件包：选择 app-public-release.aab（推荐）
 5. 配置应用信息：
   - 应用简介、详细描述
   - 应用图标（512x512）
   - 应用截图（5-8 张）
   - 版本说明：首次发布，提供待办管理、锁屏显示、AI 建议功能
 6. 隐私合规配置：
   - 隐私政策 URL：您托管的网页链接
   - 权限说明：逐项填写每个权限的用途
   - 第三方 SDK 声明：
       - SDK 名称：DeepSeek API
     - 收集的信息：待办文本内容
     - 使用目的：提供 AI 智能建议
     - 隐私政策：https://www.deepseek.com/privacy
 7. 支付设置：
   - 首次上架建议选择"免费"
   - 如需付费，参考前文的付费模式说明
 8. 提交审核（通常 3-5 个工作日）

 ---
 9. 审核通过后

 - 应用上架华为应用市场
 - 用户可搜索"逐梦"下载
 - 在开发者后台查看数据：下载量、评分、评论、崩溃日志

 ---
 上架前检查清单

 技术配置

 - 生成正式 keystore 并配置签名
 - 包名已修改为 com.zhumeng.jinrisuopin
 - 移除硬编码的 DeepSeek API Key
 - 添加 API Key 配置页面
 - 创建隐私政策和用户协议文档
 - 在应用内添加隐私政策展示页面
 - 托管隐私政策网页并获得 URL
 - 检查 ProGuard 混淆规则
 - 生成最终 Release APK/AAB

 功能测试

 - 待办创建/编辑/删除功能正常
 - 提醒通知正常推送
 - 锁屏显示正常工作
 - 壁纸设置功能正常
 - DeepSeek AI 功能正常（配置 Key 后）
 - 隐私政策页面正常显示
 - 所有权限正常申请和使用
 - 应用在不同设备上正常运行
 - 无明显崩溃或性能问题

 材料准备

 - 应用截图（5-8 张，1080x2340）
 - 应用图标（512x512）
 - 应用简介（50 字以内）
 - 应用详细描述（500-1000 字）
 - 应用关键词（5-10 个）
 - 版本更新说明

 华为应用市场

 - 注册华为开发者账号
 - 完成实名认证
 - 填写应用信息
 - 配置隐私合规信息
 - 声明第三方 SDK（DeepSeek）
 - 填写权限使用说明
 - 上传软件包（AAB 或 APK）
 - 提交审核

 ---
 验证方法总结

 端到端测试流程

 1. 构建验证：
 flutter clean
 flutter pub get
 flutter build appbundle --release --flavor public

 2. 签名验证：
 keytool -printcert -jarfile build/app/outputs/flutter-apk/app-public-release.apk

 3. 安装测试：
 adb install -r build/app/outputs/flutter-apk/app-public-release.apk

 4. 功能测试（在真实设备上）：
   - 打开应用，检查所有功能是否正常
   - 测试 API Key 配置流程
   - 测试锁屏显示
   - 测试通知提醒
   - 查看隐私政策页面
 5. 反编译检查（安全验证）：
   - 使用 jadx-gui 反编译 APK
   - 确认无硬编码的 API Key
   - 确认代码已混淆
 6. 应用市场提交：
   - 上传到华为 AppGallery Connect
   - 填写所有必需信息
   - 提交审核并等待结果

 ---
 预计时间和成本

 开发时间

 - 技术配置：2-3 天
 - 材料准备：1-2 天
 - 测试和修复：1-2 天
 - 总计：4-7 天

 资金成本

 - 华为开发者账号（个人）：免费
 - 华为开发者账号（企业）：¥99/年
 - 隐私政策托管（GitHub Pages）：免费
 - 最低成本：¥0（个人开发者 + GitHub Pages）

 审核周期

 - 华为应用市场审核：3-5 个工作日
 - 可能需要补充材料或修改（额外 1-3 天）

 ---
 关键注意事项

 1. Keystore 安全：备份 keystore 文件到多个位置，丢失后无法更新应用
 2. 包名不可变：包名一旦上架不可修改，请确认无误
 3. API Key 安全：确保移除所有硬编码，通过反编译验证
 4. 隐私合规：详细填写权限说明，避免审核被拒
 5. 测试充分：在多个设备上测试，确保无崩溃
 6. 付费策略：建议首次上架选择免费，积累用户后再引入付费功能

 ---
 后续优化建议

 上架成功后，可以考虑：

 1. 集成华为 HMS Core：
   - HMS Analytics（数据分析）
   - HMS Crash（崩溃收集）
   - HMS IAP（应用内支付）
 2. 功能迭代：
   - 添加云同步（需要后端服务）
   - 添加深色模式
   - 添加桌面小组件
 3. 运营推广：
   - 优化应用商店关键词
   - 鼓励用户评价
   - 社交媒体推广
 4. 商业化：
   - 引入应用内购买
   - 提供高级版订阅
   - 广告变现（谨慎使用）